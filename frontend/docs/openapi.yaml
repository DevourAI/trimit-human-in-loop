openapi: 3.0.0
info:
  title: TrimIt API
  description: API documentation
  version: 0.0.1
paths:
  /get_step_outputs:
    get:
      tags:
      - Steps
      summary: Get specific outputs for a given workflow and list of steps
      description: TODO
      operationId: get_step_outputs_get_step_outputs_get
      parameters:
      - name: step_keys
        in: query
        required: true
        schema:
          type: string
          title: Step Keys
      - name: latest_retry
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Latest Retry
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetStepOutputs'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /get_all_outputs:
    get:
      tags:
      - Steps
      summary: Get all outputs, ordered earliest to latest in time, for a given workflow
      description: TODO
      operationId: get_all_outputs_get_all_outputs_get
      parameters:
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetStepOutputs'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /get_video_processing_status:
    get:
      tags:
      - FunctionCalls
      summary: Get status of video processing jobs
      description: TODO
      operationId: get_video_processing_status_get_video_processing_status_get
      parameters:
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 0
          title: Timeout
      - name: user_email
        in: query
        required: true
        schema:
          type: string
          format: email
          title: User Email
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - type: array
                items:
                  type: string
              - type: 'null'
              title: Video Hashes
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetVideoProcessingStatus'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /check_function_call_results:
    get:
      tags:
      - FunctionCalls
      summary: Check the status of modal function calls
      description: TODO
      operationId: check_function_call_results_check_function_call_results_get
      parameters:
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 0
          title: Timeout
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
              title: Modal Call Ids
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckFunctionCallResults'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /step:
    get:
      tags:
      - Steps
      summary: Run next step
      description: 'This method returns a strongly typed `StreamingResponse`, where
        each chunk will be proper JSON.

        The chunk JSONs are each "instances" of the `CutTranscriptLinearWorkflowStreamingOutput`
        wrapper class.

        The wrapper class includes several type variants, only one of which will be
        non-null at a time.


        The method will call the underlying `step()` method of the workflow until
        a step is run that needs user feedback to proceed.

        Along the way, partial output will be streamed to the client.

        These partial outputs include responses from the backend (`partial_backend_output:
        PartialBackendOutput`) and responses from the LLM (`partial_llm_output: PartialLLMOutput`).

        While present in the wrapper class, the client should not expect to receive
        `FinalLLMOutput` on the frontend, as that is parsed by the backend for further
        processing.

        The last output of every substep is of type `CutTranscriptLinearWorkflowStepOutput`,

        which is also the type that is returned by the API in methods like `/get_step_outputs`
        and `/get_all_outputs`.

        However, since some substeps do not request user feedback, some of these outputs
        will be streamed as `partial_step_output` to the client,

        and the backend will continue on without waiting for feedback.

        The last output this method produces is always `final_step_output`, which
        includes a request/prompt for user feedback (`response.final_step_output.user_feedback_request`)'
      operationId: step_endpoint_step_get
      parameters:
      - name: user_input
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: string conversational input from the user that will be provided
            to the underlying LLM
          title: User Input
        description: string conversational input from the user that will be provided
          to the underlying LLM
      - name: streaming
        in: query
        required: false
        schema:
          type: boolean
          description: If False, do not stream intermediate output and just provide
            the final workflow output after all substeps have ran
          default: true
          title: Streaming
        description: If False, do not stream intermediate output and just provide
          the final workflow output after all substeps have ran
      - name: ignore_running_workflows
        in: query
        required: false
        schema:
          type: boolean
          description: If True, run this workflow's step even if it is already running.
            May lead to race conditions in underlying database
          default: false
          title: Ignore Running Workflows
        description: If True, run this workflow's step even if it is already running.
          May lead to race conditions in underlying database
      - name: retry_step
        in: query
        required: false
        schema:
          type: boolean
          description: If True, indicates that the client desires to run the last
            step again, optionally with user feedback in user_input instructing the
            LLM how to modify its previous output
          default: false
          title: Retry Step
        description: If True, indicates that the client desires to run the last step
          again, optionally with user feedback in user_input instructing the LLM how
          to modify its previous output
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CutTranscriptLinearWorkflowStreamingOutput'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /reset_workflow:
    get:
      tags:
      - Workflows
      summary: Reset a workflow to initial state
      description: TODO
      operationId: reset_workflow_reset_workflow_get
      parameters:
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /revert_workflow_step:
    get:
      tags:
      - Workflows
      summary: Revert a workflow one step
      description: TODO
      operationId: revert_workflow_step_revert_workflow_step_get
      parameters:
      - name: to_before_retries
        in: query
        required: false
        schema:
          type: boolean
          description: If True, revert to before any retries. Otherwise, revert to
            the most recent retry
          default: false
          title: To Before Retries
        description: If True, revert to before any retries. Otherwise, revert to the
          most recent retry
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /revert_workflow_step_to:
    get:
      tags:
      - Workflows
      summary: Revert a workflow to a particular step/substep
      description: TODO
      operationId: revert_workflow_step_to_revert_workflow_step_to_get
      parameters:
      - name: step_name
        in: query
        required: true
        schema:
          type: string
          title: Step Name
      - name: substep_name
        in: query
        required: true
        schema:
          type: string
          title: Substep Name
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /all_steps:
    get:
      tags:
      - Workflows
      summary: Get ordered, detailed description of each step for a workflow
      description: These will be very similar for each workflow. The only current
        difference is in the number of stages.
      operationId: get_all_steps_all_steps_get
      parameters:
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExportableSteps'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /get_latest_state:
    get:
      tags:
      - Workflows
      summary: Get the latest state of a workflow
      description: TODO
      operationId: get_latest_state_get_latest_state_get
      parameters:
      - name: with_output
        in: query
        required: false
        schema:
          type: boolean
          description: if True, return the most recent step output
          default: false
          title: With Output
        description: if True, return the most recent step output
      - name: with_all_steps
        in: query
        required: false
        schema:
          type: boolean
          description: if True, return the Steps object of all the workflow's steps
          default: true
          title: With All Steps
        description: if True, return the Steps object of all the workflow's steps
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLatestState'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /download_transcript_text:
    get:
      summary: Download Transcript Text
      operationId: download_transcript_text_download_transcript_text_get
      parameters:
      - name: step_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Step Name
      - name: substep_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Substep Name
      - name: stream
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Stream
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /download_soundbites_text:
    get:
      summary: Download Soundbites Text
      operationId: download_soundbites_text_download_soundbites_text_get
      parameters:
      - name: step_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Step Name
      - name: substep_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Substep Name
      - name: stream
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Stream
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /download_timeline:
    get:
      summary: Download Timeline
      operationId: download_timeline_download_timeline_get
      parameters:
      - name: step_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Step Name
      - name: substep_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Substep Name
      - name: stream
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Stream
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /video:
    get:
      summary: Stream Video
      operationId: stream_video_video_get
      parameters:
      - name: video_path
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Path
      - name: step_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Step Name
      - name: substep_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Substep Name
      - name: stream
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Stream
      - name: timeline_name
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Timeline Name
      - name: length_seconds
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          title: Length Seconds
      - name: video_hash
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Hash
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: video_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
      - name: wait_until_done_running
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Wait Until Done Running
      - name: block_until
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Block Until
      - name: timeout
        in: query
        required: false
        schema:
          type: number
          default: 5
          title: Timeout
      - name: wait_interval
        in: query
        required: false
        schema:
          type: number
          default: 0.1
          title: Wait Interval
      - name: force_restart
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Force Restart
      - name: user_email
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /uploaded_high_res_video_paths:
    get:
      summary: Uploaded High Res Video Paths
      operationId: uploaded_high_res_video_paths_uploaded_high_res_video_paths_get
      parameters:
      - name: md5_hashes
        in: query
        required: false
        schema:
          type: array
          items:
            type: string
          title: Md5 Hashes
      - name: user_email
        in: query
        required: true
        schema:
          type: string
          format: email
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /uploaded_video_hashes:
    get:
      summary: Uploaded Video Hashes
      operationId: uploaded_video_hashes_uploaded_video_hashes_get
      parameters:
      - name: high_res_user_file_paths
        in: query
        required: false
        schema:
          type: array
          items:
            type: string
          title: High Res User File Paths
      - name: user_email
        in: query
        required: true
        schema:
          type: string
          format: email
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /uploaded_videos:
    get:
      tags:
      - Videos
      summary: Get information about a user's uploaded videos
      description: TODO
      operationId: uploaded_videos_uploaded_videos_get
      parameters:
      - name: user_email
        in: query
        required: true
        schema:
          type: string
          format: email
          title: User Email
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UploadedVideo'
                title: Response Uploaded Videos Uploaded Videos Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /upload:
    post:
      tags:
      - UploadVideo
      summary: Upload a video
      description: TODO
      operationId: upload_multiple_files_upload_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_multiple_files_upload_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadVideo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
components:
  schemas:
    Body_upload_multiple_files_upload_post:
      properties:
        files:
          items:
            type: string
            format: binary
          type: array
          title: Files
        high_res_user_file_paths:
          items:
            type: string
          type: array
          title: High Res User File Paths
        timeline_name:
          type: string
          title: Timeline Name
        overwrite:
          type: boolean
          title: Overwrite
          default: false
        use_existing_output:
          type: boolean
          title: Use Existing Output
          default: true
        reprocess:
          type: boolean
          title: Reprocess
          default: false
        user_email:
          type: string
          format: email
          title: User Email
      type: object
      required:
      - files
      - high_res_user_file_paths
      - timeline_name
      - user_email
      title: Body_upload_multiple_files_upload_post
    CheckFunctionCallResults:
      properties:
        statuses:
          items:
            additionalProperties:
              type: string
            type: object
          type: array
          title: Statuses
      type: object
      required:
      - statuses
      title: CheckFunctionCallResults
    CutTranscriptLinearWorkflowStepInput:
      properties:
        user_prompt:
          anyOf:
          - type: string
          - type: 'null'
          title: User Prompt
        llm_modified_partial_feedback:
          anyOf:
          - $ref: '#/components/schemas/PartialFeedback'
          - type: 'null'
        is_retry:
          type: boolean
          title: Is Retry
          default: false
        step_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Step Name
        substep_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Substep Name
      type: object
      title: CutTranscriptLinearWorkflowStepInput
    CutTranscriptLinearWorkflowStepOutput:
      properties:
        step_name:
          type: string
          title: Step Name
        substep_name:
          type: string
          title: Substep Name
        done:
          type: boolean
          title: Done
          default: false
        user_feedback_request:
          anyOf:
          - type: string
          - type: 'null'
          title: User Feedback Request
        partial_user_feedback_request:
          anyOf:
          - type: string
          - type: 'null'
          title: Partial User Feedback Request
        step_inputs:
          anyOf:
          - $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepInput'
          - type: 'null'
        step_outputs:
          anyOf:
          - type: object
          - type: 'null'
          title: Step Outputs
        export_result:
          anyOf:
          - additionalProperties:
              anyOf:
              - type: string
              - items:
                  type: string
                type: array
              - additionalProperties:
                  items:
                    type: string
                  type: array
                type: object
            type: object
          - type: 'null'
          title: Export Result
        export_call_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Export Call Id
        error:
          anyOf:
          - type: string
          - type: 'null'
          title: Error
        retry:
          type: boolean
          title: Retry
          default: false
      type: object
      required:
      - step_name
      - substep_name
      title: CutTranscriptLinearWorkflowStepOutput
    CutTranscriptLinearWorkflowStreamingOutput:
      properties:
        partial_llm_output:
          anyOf:
          - $ref: '#/components/schemas/PartialLLMOutput'
          - type: 'null'
        final_llm_output:
          anyOf:
          - $ref: '#/components/schemas/FinalLLMOutput'
          - type: 'null'
        partial_backend_output:
          anyOf:
          - $ref: '#/components/schemas/PartialBackendOutput'
          - type: 'null'
        partial_step_output:
          anyOf:
          - $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepOutput'
          - type: 'null'
        final_step_output:
          anyOf:
          - $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepOutput'
          - type: 'null'
      type: object
      title: CutTranscriptLinearWorkflowStreamingOutput
    ExportableStepInfo:
      properties:
        substep_name:
          type: string
          title: Substep Name
          description: name of the substep
        user_feedback:
          type: boolean
          title: User Feedback
          description: If True, this step will stop the workflow when finished in
            order to gather feedback from the user
        step_name:
          type: string
          title: Step Name
          description: name of the higher-level step
        input:
          anyOf:
          - $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepInput'
          - type: 'null'
          description: Input that was (or will be) provided to the step's method
        chunked_feedback:
          type: boolean
          title: Chunked Feedback
          description: If True, this step desires feedback from the user about several
            independent 'chunks' of its output. For instance, feedback about each
            soundbite produced.
          default: false
        export_transcript:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Export Transcript
          description: 'If True, this step will export a transcript pickle (TODO:
            modify to export JSON) and a plaintext file'
          default: true
        export_video:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Export Video
          description: If True, this step will export an mp4 video file
          default: true
        export_soundbites:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Export Soundbites
          description: If True, this step will export a transcript (pickle- eventually
            JSON, and plaintext) of the workflow's soundbites, along with timeline
            XMLs and video mp4s for each
          default: true
        export_timeline:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Export Timeline
          description: If True, this step will export a timeline XML file
          default: true
        export_speaker_tagging:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Export Speaker Tagging
          description: If True, this step will export several sample mp4s for each
            speaker (annotated with the current speaker tags in the export_result
            dict mapping to filenames)
          default: false
      type: object
      required:
      - substep_name
      - user_feedback
      - step_name
      title: ExportableStepInfo
    ExportableStepWrapper:
      properties:
        name:
          type: string
          title: Name
        substeps:
          items:
            $ref: '#/components/schemas/ExportableStepInfo'
          type: array
          title: Substeps
      type: object
      required:
      - name
      - substeps
      title: ExportableStepWrapper
    ExportableSteps:
      properties:
        steps:
          items:
            $ref: '#/components/schemas/ExportableStepWrapper'
          type: array
          title: Steps
      type: object
      required:
      - steps
      title: ExportableSteps
    FinalLLMOutput:
      properties:
        str_value:
          anyOf:
          - type: string
          - type: 'null'
          title: Str Value
        json_value:
          anyOf:
          - type: object
          - type: 'null'
          title: Json Value
        chunk:
          anyOf:
          - type: integer
          - type: 'null'
          title: Chunk
        calling_method_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Calling Method Name
      type: object
      title: FinalLLMOutput
    GetLatestState:
      properties:
        user_messages:
          items:
            type: string
          type: array
          title: User Messages
          description: list of all messages user has provided
          default: []
        step_history_state:
          items:
            $ref: '#/components/schemas/StepKey'
          type: array
          title: Step History State
          description: list of every step and substeps run so far, including retry_{i}
            prefixes on substeps when a step was retried
          default: []
        video_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Video Id
          description: id of the video's db model. Provide to future workflow calls
            for faster retrieval over video_hash
        user_id:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
          description: id of the user's db model. Provide to future workflow calls
            for faster retrieval over user_email
        last_step:
          anyOf:
          - $ref: '#/components/schemas/ExportableStepInfo'
          - type: 'null'
          description: information about the most recently run (sub)step. provides
            additional information over what's is provided in step_history_state,
            like whether the state includes concurrent chunked responses from the
            LLM
        next_step:
          anyOf:
          - $ref: '#/components/schemas/ExportableStepInfo'
          - type: 'null'
          description: information about the next scheduled (sub)step. provides additional
            information over what's is provided in step_history_state, like whether
            the state includes concurrent chunked responses from the LLM
        all_steps:
          anyOf:
          - $ref: '#/components/schemas/ExportableSteps'
          - type: 'null'
          description: detailed, ordered, information about each step/substep in this
            workflow
        output:
          anyOf:
          - $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepOutput'
          - type: 'null'
          description: most recent substep output
      type: object
      title: GetLatestState
    GetStepOutputs:
      properties:
        outputs:
          items:
            $ref: '#/components/schemas/CutTranscriptLinearWorkflowStepOutput'
          type: array
          title: Outputs
      type: object
      required:
      - outputs
      title: GetStepOutputs
    GetVideoProcessingStatus:
      properties:
        statuses:
          items:
            additionalProperties:
              type: string
            type: object
          type: array
          title: Statuses
      type: object
      required:
      - statuses
      title: GetVideoProcessingStatus
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    PartialBackendOutput:
      properties:
        value:
          anyOf:
          - type: string
          - type: 'null'
          title: Value
          description: Information provided by the backend about what it is currently
            doing
        current_substep:
          anyOf:
          - $ref: '#/components/schemas/ExportableStepInfo'
          - type: 'null'
          description: Current substep that produced this output, provided if there
            are more than one that will be called before a feedback request
        chunk:
          anyOf:
          - type: integer
          - type: 'null'
          title: Chunk
          description: chunk index if this output was produced concurrently
      type: object
      title: PartialBackendOutput
    PartialFeedback:
      properties:
        partials_to_redo:
          items:
            type: boolean
          type: array
          title: Partials To Redo
        relevant_user_feedback_list:
          anyOf:
          - items:
              anyOf:
              - type: string
              - type: 'null'
            type: array
          - items:
              type: string
            type: array
          title: Relevant User Feedback List
      type: object
      required:
      - partials_to_redo
      - relevant_user_feedback_list
      title: PartialFeedback
    PartialLLMOutput:
      properties:
        value:
          type: string
          title: Value
          description: string value of a partial output response from the LLM
        chunk:
          anyOf:
          - type: integer
          - type: 'null'
          title: Chunk
          description: chunk index if this output was produced concurrently with several
            independent calls to the LLM
        calling_method_name:
          anyOf:
          - type: string
          - type: 'null'
          title: Calling Method Name
          description: backend method called to produce this output. Only provided
            if there are multiple methods called in sequence by the step
      type: object
      required:
      - value
      title: PartialLLMOutput
    StepKey:
      properties:
        name:
          type: string
          title: Name
        substeps:
          items:
            type: string
          type: array
          title: Substeps
      type: object
      required:
      - name
      - substeps
      title: StepKey
    UploadVideo:
      properties:
        processing_call_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Processing Call Id
        video_hashes:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Video Hashes
        result:
          type: string
          title: Result
          default: error
        messages:
          items:
            type: string
          type: array
          title: Messages
          default: []
      type: object
      title: UploadVideo
    UploadedVideo:
      properties:
        filename:
          type: string
          title: Filename
        video_hash:
          type: string
          title: Video Hash
        path:
          type: string
          title: Path
      type: object
      required:
      - filename
      - video_hash
      - path
      title: UploadedVideo
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
